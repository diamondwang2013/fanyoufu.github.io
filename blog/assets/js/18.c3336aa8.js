(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{206:function(a,t,e){"use strict";e.r(t);var s=e(6),l=Object(s.a)({},function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[e("h1",{attrs:{id:"如何去生成自己的xxx-cli命令"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#如何去生成自己的xxx-cli命令","aria-hidden":"true"}},[a._v("#")]),a._v(" 如何去生成自己的xxx-cli命令")]),a._v(" "),e("h2",{attrs:{id:"背景"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#背景","aria-hidden":"true"}},[a._v("#")]),a._v(" 背景")]),a._v(" "),e("p",[a._v("你积累了一些前端工程代码，希望这些工程代码能够复用。 比如说，为了学习使用typescript，我们在本地使用gulp,typescript,browerify,live-server等工具搭建了一个学习环境。")]),a._v(" "),e("p",[a._v("现在，你如果把这个学习环境提供给其他小伙伴使用？")]),a._v(" "),e("h2",{attrs:{id:"如何复用代码"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#如何复用代码","aria-hidden":"true"}},[a._v("#")]),a._v(" 如何复用代码")]),a._v(" "),e("ol",[e("li",[a._v("纯文件分享。\n例如，共享在百度云中。下次要使用时，直接copy下来，改改目录名，工程名。")]),a._v(" "),e("li",[a._v("npm包。\n在创建好前端项目之后，通过npm install XXX 的方式把代码拉下来，保存在node_modules中。通过 import 的方式使用代码。")]),a._v(" "),e("li",[a._v("npm-cli 命名行")])]),a._v(" "),e("p",[a._v("具体使用方式是：")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("npm instill -g XXXX;\n\nXXXX 命令 参数\n")])])]),e("p",[a._v("典型的代码有 vue-cli, @vue-cli  create-react-app 等等。")]),a._v(" "),e("p",[a._v("本文介绍第三种方式。")]),a._v(" "),e("h2",{attrs:{id:"基本步骤"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#基本步骤","aria-hidden":"true"}},[a._v("#")]),a._v(" 基本步骤")]),a._v(" "),e("ol",[e("li",[a._v("在github上创建代码库(下午以my-cli为例)。")]),a._v(" "),e("li",[a._v("在本地以npm包的方式开发。")]),a._v(" "),e("li",[a._v("开发完成后，打包上传到 npm。")]),a._v(" "),e("li",[a._v("其他用户通过 npm install -g my-cli 的方式安装到本地。")]),a._v(" "),e("li",[a._v("在本地运行 my-cli create ，来创建一个初始项目。")])]),a._v(" "),e("h3",{attrs:{id:"让你的代码支持命令行"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#让你的代码支持命令行","aria-hidden":"true"}},[a._v("#")]),a._v(" 让你的代码支持命令行")]),a._v(" "),e("ol",[e("li",[a._v("在package.json中设置 bin选项。")])]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v('{\n    "bin" : { "cliname" : "./cli.js" }\n}\n')])])]),e("p",[a._v("更多参考"),e("a",{attrs:{href:"!https://docs.npmjs.com/files/package.json#bin"}},[a._v("bin")]),a._v(" 。\n2. 创建 bin/cli.js文件\n在项目根目录下，创建bin/cli.js文件。其中，目录结构如下：")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("my-cli\n    -bin\n        -cli.js\n    -package.json\n")])])]),e("p",[a._v("编写bin/cli.js中的代码如下：")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v('#!/usr/bin/env node\nconsole.info("hello my-cli !")\n')])])]),e("p",[a._v("特别注意第一句： "),e("code",[a._v("#!/usr/bin/env node")])]),a._v(" "),e("ol",{attrs:{start:"3"}},[e("li",[a._v("本地加载这个包\n在项目目录下运行 npm install -g")])]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v(" npm install -g\n")])])]),e("p",[a._v("切换到其他的目录下。你试着在控制台中运行：")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("my-cli\n")])])]),e("p",[a._v("就会看到控制台的输出了。")]),a._v(" "),e("p",[a._v("为啥？\n我们知道，如果在控制台中直接输入my-cli还不报错，说明，my-cli已经写入了环境目录下。在控制台中运行 "),e("code",[a._v("set")]),a._v(" 命令，查看当前的环境变量。\n你会发现"),e("code",[a._v("C:\\Users\\用户名\\AppData\\Roaming\\npm")]),a._v("这个路径存在于环境变中。这就意味着你在控制台中输入的命令名，会在这个目录中去找。")])])},[],!1,null,null,null);l.options.__file="create-npm-cli.md";t.default=l.exports}}]);